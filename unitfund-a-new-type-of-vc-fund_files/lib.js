!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(1),a=n(i),o=r(3),s=n(o),u=r(4),l=n(u),c=r(6),d=n(c),f=r(8),p=r(9),m=n(p),h=r(10),v=n(h),b=new s.default;(0,v.default)(),window.hb_dmx_res={ssp:a.default,utils:b,collections:l.default,auction:d.default,Beacon:m.default,activation:v.default,emit:f.emit}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),a=n(i),o=r(5),s=n(o),u={};u=Math.floor(100*Math.random())<=35?{dmx:s.default,an:a.default}:{an:a.default},window.localStorage.dmForceBid&&(u={dmx:s.default,an:a.default}),t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),a=n(i),o=r(4),s=n(o),u=new a.default,l=1908,c={constructor:function(){},parse:function(e){var t=document.createElement("script");t.src=e,t.async=!0;var r=document.getElementsByTagName("head")[0];r.appendChild(t)},jpt:function(e){var t=e.seat,r=e.params,n=e.auctionId,i="",a="http:"===document.location.protocol?"http://ib.adnxs.com/jpt?":"https://secure.adnxs.com/jpt?",o=n,s=0,l=t,c=t,d="window.hb_dmx_res.auction.reception",f="dm-pl-"+r.id;if(Array.isArray(r.sizes))var p=r.sizes[0],m=u.clean(r.sizes);var h=r.floor?parseFloat(r.floor).toFixed(2):"",v={memberId:l,member:c,callback_uid:o,psa:s,callback:d,code:f,size:p,promo_sizes:m,reserve:h};i=a;for(var b in v)("reserve"!==b||"reserve"===b&&""!==v[b])&&(i+=b+"="+v[b]+"&");i+="referrer="+encodeURIComponent(window.location.href),this.parse(i)},execute:function(e){var t=this;e.forEach(function(e){var r=u.generateId(30),n=e.params,i=e.placementCode,a=e.bidder,o="appnexus",c=u.clone({seat:l,auctionId:r,params:n,placementCode:i,bidder:a,ssp:o},e);s.default.register(c.auctionId,c),t.jpt(c)})}};t.default=c},function(e,t){"use strict";function r(e){return Array.isArray(e)?e:Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,[{key:"logger",value:function(e){try{window.localStorage.dmConsole===!0&&console.log("FROM DM LIBS: "+e)}catch(e){}}},{key:"ajax",value:function(e,t){}},{key:"removeComma",value:function(e){return e.replace(/,(\s+)?$/,"")}},{key:"generateId",value:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}},{key:"clean",value:function(e){var t=r(e),n=(t[0],t.slice(1));return n}},{key:"clone",value:function(e,t){for(var r in t)e[r]=t[r];return e}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),a=n(i),o=new a.default,s={col:{},win:[],collect:[],register:function(e,t){this.col[e]?o.logger(" "+e+" already register"):this.col[e]=t},update:function(e,t){if(this.col[e])for(var r in t)this.col[e][r]=t[r];else o.logger(e+" can't be updated")},select:function(e){return o.logger(e),this.col[e.auctionId]},selectById:function(e){return this.col[e]},selectField:function(e,t){return this.col[e][t]||"error"},selectWin:function(e){for(var t in e)this.win[e[t].placementCode]?this.win[e[t].placementCode].cpm<e[t].cpm&&(this.win[e[t].placementCode]=e[t]):this.win[e[t].placementCode]=e[t]}};t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),a=n(i),o=r(4),s=n(o),u=new a.default,l={constructor:function(){},parse:function(e){var t=document.createElement("script");t.src=e,t.async=!0;var r=document.getElementsByTagName("head")[0];r.appendChild(t)},jpt:function(e){var t="//rtb.districtm.io/bid?",r="",n="http:"===document.location.protocol?"http:":"https:",i="window.hb_dmx_res.auction.receptionDmx",a="",o=e.impid,s=e.reqid;try{"undefined"!=typeof localStorage.dmio_dmuid&&(a=localStorage.dmio_dmuid)}catch(e){a=""}var l=e.params.id,c=e.params.sizes[0],d=u.clean(e.params.sizes);try{e.params.floor&&(e.params.floor=parseFloat(e.params.floor).toFixed(2)>2?parseFloat(e.params.floor).toFixed(2):2)}catch(e){}var f=e.params.floor?parseFloat(e.params.floor).toFixed(2):parseFloat(2).toFixed(2),p={callback_function:i,id:l,size:c,promo_sizes:d,dmuid:a,floor:f,impid:o,reqid:s};r+=n+t;for(var m in p)r+=m+"="+p[m]+"&";r=r.substring(0,r.length-1),this.parse(r)},execute:function(e){var t=this;e.forEach(function(e){var r=u.generateId(8),n=r,i=u.generateId(8),a="dmx",o=u.clone({reqid:r,auctionId:n,impid:i,ssp:a},e);s.default.register(n,o),t.jpt(o)})}};t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),s=n(o),u=r(1),l=n(u),c=r(3),d=n(c),f=r(7),p=n(f),m=r(8),h=new d.default,v=function(){function e(t){i(this,e),this.bid=t}return a(e,[{key:"done",value:function(e){}},{key:"fixSize",value:function(e){var t=void 0;try{return t=Array.isArray(e[0])?e.map(function(e){return e[0]+"x"+e[1]}):[e[0]+"x"+e[1]]}catch(e){return["0x0"]}}},{key:"run",value:function(e,t,r){window.hb_dmx_res.bh=r;window.hb_dmx_res.globalTimeout=t.timeout,this.returnToPB(window.hb_dmx_res.collections.col,window.hb_dmx_res.globalTimeout);for(var n in l.default)try{l.default[n].execute(t)}catch(e){h.logger("Error on "+n+" | error message: "+e.message+" 50 import auction")}}},{key:"setWin",value:function(){}},{key:"reception",value:function(e){s.default.update(e.callback_uid,{response:e});var t=s.default.selectById(e.callback_uid).params.revShare,r=s.default.selectById(e.callback_uid).params.id,n=s.default.selectById(e.callback_uid),i={ssp:"appnexusDMX",winBid:parseFloat(n.response.result.cpm/1e4).toFixed(2),tieBreaker:0,zone:400,auctionId:n.response.callback_uid,adSize:n.response.result.width+"x"+n.response.result.height,domain:document.domain,id:n.response.callback_uid},a={ssp:"appnexus",winBid:Number((n.response.result.cpm/1e4).toFixed(2)),zone:400,dmtagid:String(r),auctionId:e.callback_uid,adSize:n.response.result.width+"x"+n.response.result.height,domain:document.domain};this.done(n.ssp),t?e.result.cpm=parseFloat(e.result.cpm*t/1e4).toFixed(2):e.result.cpm=parseFloat(e.result.cpm/1e4).toFixed(2),e.result.banner='<iframe border="0" marginheight="0" marginwidth="0" scrolling="no" frameborder="0"  vspace="0" hspace="0" src="'+e.result.ad+'" width="'+e.result.width+'" height="'+e.result.height+'"></iframe>';var o=new p.default(i),u=new p.default(a);e.result.banner+='<img src="'+o.run()+'" width="1" height="1" style="display:none;">',e.result.banner+='<img src="'+u.runNew()+'" width="1" height="1" style="display:none;">',s.default.collect.push(s.default.selectById(e.callback_uid)),m.emit.register(n.placementCode,n),m.emit.setWinner(n.bidId)}},{key:"sendWinner",value:function(){}},{key:"receptionDmx",value:function(e){s.default.update(e.result.reqid,{response:e});var t=s.default.selectById(e.result.reqid),r=s.default.selectById(e.result.reqid).params.revShare;this.done(t.ssp);var n=e.result.dm_tracking_uri,i={ssp:"dmx",winBid:Number(e.result.cpm),slotName:e.reqid,adSize:""+e.result.size,domain:document.domain,auctionId:e.result.reqid,dmtagid:e.result.id},a='<img src="'+n+'" width="1" height="1" style="display:none;">',o=new p.default(i),u='<img src="'+o.runBust()+'" width="1" height="1" style="display:none;">';e.result.html&&(e.result.height=e.result.size.split("x")[1],e.result.width=e.result.size.split("x")[0],e.result.banner=""+e.result.html+a+u),r?e.result.cpm=parseFloat(e.result.cpm*r).toFixed(2):e.result.cpm=parseFloat(e.result.cpm).toFixed(2),s.default.collect.push(s.default.selectById(e.result.reqid)),m.emit.register(t.placementCode,t)}},{key:"returnToPB",value:function(e,t){setTimeout(function(){s.default.selectWin(e)},t)}}]),e}();t.default=new v},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-=",lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),toUtf8:function(e){var t,r=-1,n=e.length,i=[];if(/^[\x00-\x7f]*$/.test(e))for(;++r<n;)i.push(e.charCodeAt(r));else for(;++r<n;)t=e.charCodeAt(r),t<128?i.push(t):t<2048?i.push(t>>6|192,63&t|128):i.push(t>>12|224,t>>6&63|128,63&t|128);return i},encode:function(e){var t,r,n,i=this.toUtf8(e),a=-1,o=i.length,s=[,,,];if(this.ie){for(var u=[];++a<o;)t=i[a],r=i[++a],s[0]=t>>2,s[1]=(3&t)<<4|r>>4,isNaN(r)?s[2]=s[3]=64:(n=i[++a],s[2]=(15&r)<<2|n>>6,s[3]=isNaN(n)?64:63&n),u.push(this.alphabet.charAt(s[0]),this.alphabet.charAt(s[1]),this.alphabet.charAt(s[2]),this.alphabet.charAt(s[3]));return u.join("")}for(var u="";++a<o;)t=i[a],r=i[++a],s[0]=t>>2,s[1]=(3&t)<<4|r>>4,isNaN(r)?s[2]=s[3]=64:(n=i[++a],s[2]=(15&r)<<2|n>>6,s[3]=isNaN(n)?64:63&n),u+=this.alphabet[s[0]]+this.alphabet[s[1]]+this.alphabet[s[2]]+this.alphabet[s[3]];return u}},a=function(){function e(t){var n=t.adSize,i=t.ssp,a=t.winBid,o=t.tieBreaker,s=t.zone,u=t.slotName,l=t.domain,c=t.id,d=t.reqid,f=t.auctionId,p=t.dmtagid,m=t.adsize;r(this,e),this.imp={adSize:n,ssp:i,winBid:a,tieBreaker:o,zone:s,slotName:u,reqid:d,auctionId:f,dmtagid:p,adsize:m,domain:this.cleanDomain(l),id:c},this.link="//adx.districtm.ca/hi/impression/",this.newLink="//dmx.districtm.ca/ib/pbw/",this.bust="//dmx.districtm.ca/ib/pbw/"}return n(e,[{key:"forEach",value:function(e,t){}},{key:"cleanDomain",value:function(e){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}},{key:"run",value:function(){return""+this.link+i.encode(JSON.stringify(this.imp))}},{key:"runNew",value:function(){return""+this.newLink+i.encode(JSON.stringify(this.imp))}},{key:"runBust",value:function(){return""+this.bust+i.encode(JSON.stringify(this.imp))}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emit=void 0;var i=r(4),a=n(i);t.emit={list:{},eventName:["done","start"],placement:[],winner:[],bids:{},event:function(e){},register:function(e,t){this.placement.push(t)},setWinner:function(e){this.bids[e]?this.bids[e]+=1:this.bids[e]=1,this.winner.push(this.placement.reduce(function(t,r){return e===r.bidId&&e===t.bidId&&Number(r.response.result.cpm)>=Number(t.response.result.cpm)?r:t},{response:{result:{cpm:"0.00"}},bidId:e})),this.winner.forEach(function(t){try{t.bidId===e&&window.hb_dmx_res.bh(t.response,a.default.selectById(t.response.callback_uid))}catch(r){try{t.bidId===e&&window.hb_dmx_res.bh(t.response,a.default.selectById(t.response.result.reqid))}catch(e){}}})},listen:function(e,t){this.list[e]?this.list[e].push(t):(this.list[e]=[],this.list[e].push(t))},run:function(){}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={appendEl:function(e){var t=document.scripts[document.scripts.length-1],r=t.parentElement;r.appendChild(e)},optout:function(){var e=this;e.localStorageEnabled()&&localStorage.setItem("dmio_optout","1")},optedout:function(){try{return"undefined"!=typeof localStorage.dmio_optout&&1==localStorage.dmio_optout}catch(e){return!1}},callEndPoint:function(e){try{var t=this;if(t.localStorageEnabled()&&!t.optedout()){var r=t.getTimestamp();if(t.expired(r)||"undefined"==typeof localStorage.dmio_sync){var t=this,n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,t.appendEl(n)}}}catch(e){}},getTimestamp:function(){return(new Date).getTime()},createIframe:function(e){var t=document.createElement("iframe");return t.width="0px",t.height="0px",t.src=e,t.style.display="none",t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t},expired:function(e){try{return e-2592e5>parseInt(localStorage.dmio_sync)}catch(e){return!0}},localStorageEnabled:function(){try{return localStorage.setItem("dmio_enabled","true"),!!window.localStorage}catch(e){return!1}},localStorage:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;try{var r=t.getTimestamp();localStorage.setItem("dmio_dmuid",e),localStorage.setItem("dmio_sync",r);var n=t.createIframe("//cdn.districtm.ca/sync.html?dmuid="+e);return t.appendEl(n),!0}catch(e){return!1}}),callback:function(e){var t=this;t.localStorage(e)}};t.default=r},function(e,t){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}]);